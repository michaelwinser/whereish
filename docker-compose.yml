# Whereish - Docker Compose for Self-Hosting
# Usage: docker compose up -d

services:
  whereish:
    build: .
    container_name: whereish
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      - PORT=8080
      - DATABASE_URL=/app/data/whereish.db
      - STATIC_DIR=/app/static
      # Google OAuth - required for sign-in
      - GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID:?GOOGLE_CLIENT_ID is required}
      # Optional: Enable dev mode for testing
      # - DEV_MODE=true
    volumes:
      - whereish-data:/app/data
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/api/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 5s

volumes:
  whereish-data:
    driver: local
